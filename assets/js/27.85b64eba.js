(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{459:function(t,a,s){"use strict";s.r(a);var n=s(35),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"tips"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[t._v("#")]),t._v(" Tips")]),t._v(" "),s("PostTags",{attrs:{tags:t.$page.frontmatter.tags}}),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#java"}},[t._v("Java")])]),s("li",[s("a",{attrs:{href:"#springboot"}},[t._v("Springboot")])]),s("li",[s("a",{attrs:{href:"#netty"}},[t._v("Netty")])]),s("li",[s("a",{attrs:{href:"#mybatis-plus"}},[t._v("Mybatis-Plus")])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"java"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java"}},[t._v("#")]),t._v(" Java")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("重写了equals方法必须也重写hashcode方法")]),t._v(" "),s("p",[t._v("默认情况下，equals方法是比较两个对象的地址，如果相同则表示是同一个对象，那么hashcode也一定是一样的。")]),t._v(" "),s("p",[t._v("一些容器比如HashMap使用了hashcode作索引key，如果重写了equals方法而不重写hashcode则可能会破坏二者的一致性，这样可能导致HashMap出现重复元素（即equals看是一样的，hashcode又不一样）或者不同的元素却冲突。")])]),t._v(" "),s("li",[s("p",[t._v("Optional")]),t._v(" "),s("ul",[s("li",[t._v("勿使用null判空，容易遗漏，"),s("code",[t._v("ifPresent()")]),t._v("都比它强，因为"),s("code",[t._v("Optional")]),t._v("对象不"),s("code",[t._v("get()")]),t._v("就用不了，从而提醒你判空。")]),t._v(" "),s("li",[t._v("更好的的方式是使用"),s("code",[t._v("orElseThrow()")]),t._v("或者其它的"),s("code",[t._v("orElseXxx()")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("Optional")]),t._v("应该仅用在函数返回值中，出现在其它的任何地方（比如入参，类属性等）都是不推荐的。")]),t._v(" "),s("li",[s("code",[t._v("map()")]),t._v("可以方便地取得对象内部的属性值而不必关系"),s("code",[t._v("Optional")]),t._v("是否有值，还可以多级调用取得更深的值。")])])]),t._v(" "),s("li",[s("p",[t._v("不要用isXXX定义布尔值，因为不同的库序列化可能会不一样导致跟预期不符。")])]),t._v(" "),s("li",[s("p",[t._v("为什么java程序需要预热？")]),t._v(" "),s("p",[t._v("java是半编译半解释型语言，jvm中有jit编译器，需要运行一段时间后才能找出热点代码，进而编译这部分代码为机器指令并缓存，这个过程叫预热，纯编译型语言是没有这个过程的。")])])]),t._v(" "),s("h2",{attrs:{id:"springboot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springboot"}},[t._v("#")]),t._v(" Springboot")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("配置文件外置")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# spring.cloud.bootstrap.location")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# spring.config.local")]),t._v("\njava "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_OPTS")]),t._v(" -jar xxx.jar --spring.cloud.bootstrap.location"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("./bootstrap.yml --spring.config.local"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("./application.yml\n")])])])]),t._v(" "),s("li",[s("p",[t._v("优雅停机")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2.3.0之后的特性")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shutdown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" graceful\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# springboot注册的jvm停机钩子，开启才能优雅停机，默认开启")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("register-shutdown-hook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  \n")])])])]),t._v(" "),s("li",[s("p",[t._v("注解")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@PreDestroy")]),t._v(" bean销毁前执行")])])]),t._v(" "),s("li",[s("p",[t._v("自定义配置的idea自动补全")]),t._v(" "),s("p",[s("code",[t._v("resources")]),t._v("目录下创建"),s("code",[t._v("META-INF")]),t._v("目录，再在"),s("code",[t._v("META-INF")]),t._v("目录下创建"),s("code",[t._v("additional-spring-configuration-metadata.json")]),t._v("文件，示例如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"properties"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"config1.a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java.lang.String"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Description for config1.a."')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"config1.b"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java.lang.String"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Description for config1.b."')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("然后"),s("strong",[t._v("重新编译")]),t._v("，一定要编译不然不能生效。")])]),t._v(" "),s("li",[s("p",[t._v("consul")]),t._v(" "),s("ul",[s("li",[t._v("如果依赖了"),s("code",[t._v("spring-cloud-starter-consul-all")]),t._v("或"),s("code",[t._v("spring-cloud-starter-consul-config")]),t._v("，需要将相关配置放到"),s("code",[t._v("bootstrap.yml")]),t._v("中而不是"),s("code",[t._v("application.yml")]),t._v("。")]),t._v(" "),s("li",[t._v("如果使用了配置功能，那么key中不能有“"),s("code",[t._v("-")]),t._v("”，否则无法加载配置。")])])])]),t._v(" "),s("h2",{attrs:{id:"netty"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#netty"}},[t._v("#")]),t._v(" Netty")]),t._v(" "),s("h2",{attrs:{id:"mybatis-plus"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-plus"}},[t._v("#")]),t._v(" Mybatis-Plus")]),t._v(" "),s("ul",[s("li",[t._v("实体模型中不要使用原始类型，因为原始类型有零值而不是null，所以更新的时候字段会被写入零值。")]),t._v(" "),s("li",[t._v("如果使用了数据库自增字段作为id，需要增加注解"),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@TableId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IdType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AUTO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])])],1)}),[],!1,null,null,null);a.default=e.exports}}]);